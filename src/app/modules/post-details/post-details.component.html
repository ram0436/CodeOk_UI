<div class="container-center bg mpt p-relative">
  <div class="watch-tutorial" [innerHTML]="documentationURL"></div>

  <!-- <iframe
      width="350"
      height="250"
      src="https://www.youtube.com/embed/79pKwdiqcwI?si=6kbVhP7426vGJx-4"
      title="YouTube video player"
      frameborder="0"
      class="youtube-video"
      allow="autoplay;"
      allowfullscreen
    ></iframe> -->
  <div class="spinner__loading" *ngIf="isLoading">
    <div>
      <mat-spinner></mat-spinner>
    </div>
  </div>
  <div class="pd-3" *ngIf="!isLoading">
    <div class="flex ml-190">
      <button class="back-btn" (click)="goBack()">
        <span class="material-icons-outlined"> chevron_left </span>Back
      </button>
      <!-- <div class="pl-50">
        <h1>{{ postDetails?.name }}</h1>
        <p>Posted : {{formatDate(postDetails?.createdOn) }}</p>
      </div> -->
    </div>
    <div class="flex flex-r gap-2 pt-3">
      <div>
        <mat-card
          class="border-1 mb-2 block img-mat-card bg-gray-card"
          *ngFor="let image of postDetails.projectImageList"
        >
          <div class="pg-card">
            <div class="postImgCont">
              <img class="postImg" [src]="image.codeImageURL" alt="" />
            </div>
          </div>
        </mat-card>
      </div>
      <div class="col-5">
        <mat-card class="border-1">
          <div class="title-flex services-title bg-gray-card">
            <span class="services-caption"
              >Popular Services from HTML Website Templates Experts</span
            >
          </div>
          <mat-card-content class="bg-gray-card">
            <label class="cart-service cart-service_support checkbox">
              <input
                type="checkbox"
                name=""
                id=""
                class="cart-service-checkbox checkbox-input"
              />
              <i class="cart-service-checkbox-icon checkbox-icon"></i>
              <span class="cart-service-label checkbox-label"
                >Get 6 more months of support and save $15</span
              >
              <span class="cart-service-prices">
                <strong class="cart-service-price cart-service-price_original"
                  >$27</strong
                >
                <strong class="cart-service-price cart-service-price_discount"
                  >$12</strong
                >
              </span>
            </label>
            <label class="cart-service cart-service_support checkbox">
              <input
                type="checkbox"
                name=""
                id=""
                class="cart-service-checkbox checkbox-input"
              />
              <i class="cart-service-checkbox-icon checkbox-icon"></i>
              <span class="cart-service-label checkbox-label"
                >Must-Have Launch Pack</span
              >
              <span class="custom-tooltip cart-service-tooltip">
                <span class="custom-tooltip-button">
                  <span
                    class="material-icons-outlined cart-service-tooltip-icon"
                  >
                    report
                  </span>
                </span>
              </span>
              <span class="cart-service-prices">
                <strong class="cart-service-price cart-service-price_original"
                  >$27</strong
                >
                <strong class="cart-service-price cart-service-price_discount"
                  >$12</strong
                >
              </span>
            </label>
            <label class="cart-service cart-service_support checkbox">
              <input
                type="checkbox"
                name=""
                id=""
                class="cart-service-checkbox checkbox-input"
              />
              <i class="cart-service-checkbox-icon checkbox-icon"></i>
              <span class="cart-service-label checkbox-label"
                >Conversion to WordPress with Page Builder</span
              >
              <span class="custom-tooltip cart-service-tooltip">
                <span class="custom-tooltip-button">
                  <span
                    class="material-icons-outlined cart-service-tooltip-icon"
                  >
                    report
                  </span>
                </span>
              </span>
              <span class="cart-service-prices">
                <strong class="cart-service-price cart-service-price_original"
                  >$27</strong
                >
                <strong class="cart-service-price cart-service-price_discount"
                  >$12</strong
                >
              </span>
            </label>
            <label class="cart-service cart-service_support checkbox">
              <input
                type="checkbox"
                name=""
                id=""
                class="cart-service-checkbox checkbox-input"
              />
              <i class="cart-service-checkbox-icon checkbox-icon"></i>
              <span class="cart-service-label checkbox-label"
                >Classic Website Customization Service</span
              >
              <span class="custom-tooltip cart-service-tooltip">
                <span class="custom-tooltip-button">
                  <span
                    class="material-icons-outlined cart-service-tooltip-icon"
                  >
                    report
                  </span>
                </span>
              </span>
              <span class="cart-service-prices">
                <strong class="cart-service-price cart-service-price_original"
                  >$27</strong
                >
                <strong class="cart-service-price cart-service-price_discount"
                  >$12</strong
                >
              </span>
            </label>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="post-price"
            ><span class="dollar">$</span
            >{{ postDetails?.price }}</mat-card-title
          >
          <mat-card-content class="description">
            <p style="margin: 0">{{ postDetails?.name }}</p>
            <div class="loc-date">
              <p class="date">{{ formatDate(postDetails?.createdOn) }}</p>
            </div>
            <div class="flex-row">
              <p class="bold">{{ averageRating.toFixed(2) }}</p>
              <div class="ratings-stars">
                <app-star-rating
                  [readOnly]="true"
                  [selectedStar]="parseAverageRating()"
                ></app-star-rating>
              </div>
              <p class="total-ratings bold">{{ totalRatings }} Total Ratings</p>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title>Overview</mat-card-title>
          <mat-card-content>
            <p class="description-content">
              <span>Project category :</span>
              {{ getSingleValue(postDetails?.projectCategoryId, "category") }}
            </p>
            <p class="description-content">
              <span>Industry :</span>
              {{ getSingleValue(postDetails?.industryTypeId, "industry") }}
            </p>
            <p class="description-content">
              <span>Technology :</span>
              {{
                getMultipleValues(
                  postDetails?.technologyMappingList,
                  "technology"
                )
              }}
            </p>
            <p class="description-content">
              <span>Version :</span>
              {{
                getMultipleValues(
                  postDetails?.technologyVersionMappingList,
                  "version"
                )
              }}
            </p>
            <p class="description-content">
              <span>Operating system :</span>
              {{
                getMultipleValues(postDetails?.operatingSystemMappingList, "os")
              }}
            </p>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title>Key Feature</mat-card-title>
          <mat-card-content>
            <p class="description-content">{{ postDetails?.description }}</p>
          </mat-card-content>
        </mat-card>
        <!-- <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            How it Works?
            <span class="material-icons-outlined" (click)="toggleTagsContent()">
              {{ isTagsVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isTagsVisible">
            <p class="description-content">
              <iframe
                width="425"
                height="300"
                src="https://www.youtube.com/embed/79pKwdiqcwI?si=6kbVhP7426vGJx-4"
                title="YouTube video player"
                frameborder="0"
                class="youtube-video"
                allow="autoplay;"
                allowfullscreen
              ></iframe>
            </p>
          </mat-card-content>
        </mat-card> -->
        <!-- <mat-card class="mt-10 border-1">
          <mat-card-title>Installation steps</mat-card-title>
          <mat-card-content>
            <p class="description-content">
              {{ postDetails?.installationSteps }}
            </p>
          </mat-card-content>
        </mat-card> -->
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex"
            >System Requirements
            <span class="material-icons-outlined" (click)="toggleReqContent()"
              >{{ isReqVisible ? "remove" : "add" }}
            </span>
          </mat-card-title>
          <mat-card-content *ngIf="isReqVisible">
            <p class="description-content">
              {{ postDetails?.systemRequirement }}
            </p>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            Installation steps
            <span class="material-icons-outlined" (click)="toggleCardContent()">
              {{ isContentVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isContentVisible">
            <p class="description-content">
              {{ postDetails?.installationSteps }}
            </p>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            Tags
            <span class="material-icons-outlined" (click)="toggleTagsContent()">
              {{ isTagsVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isTagsVisible">
            <!-- <p class="description-content">
              {{ formatTags(postDetails?.tagList) }}
            </p> -->
            <div class="attrs-wrapper">
              <div class="included-files">
                <ul>
                  <li
                    class="file-type"
                    *ngFor="let tag of postDetails?.tagList"
                  >
                    {{ tag.name }}
                  </li>
                </ul>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            Download Code
            <span
              class="material-icons-outlined"
              (click)="toggleDownloadContent()"
            >
              {{ isDownloadVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isDownloadVisible">
            <button class="download-btn" (click)="downloadCode()">
              Download Code
            </button>
            <!-- <div class="attrs-wrapper">
              <div class="included-files"></div>
            </div> -->
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            What Our Customer Says
            <span
              class="material-icons-outlined"
              (click)="toggleReviewsContent()"
            >
              {{ isReviewsVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isReviewsVisible">
            <div class="user-reviews">
              <div *ngFor="let review of reviewsData" class="review-item">
                <div class="ratings-given">
                  <app-star-rating
                    [readOnly]="true"
                    [selectedStar]="review.rating"
                  ></app-star-rating>
                </div>
                <p class="review-given">"{{ review.review }}."</p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card class="mt-10 border-1 bg-gray-card">
          <mat-card-title class="title-flex">
            Rate Us
            <span class="material-icons-outlined" (click)="toggleRateContent()">
              {{ isRateVisible ? "remove" : "add" }}
            </span></mat-card-title
          >
          <mat-card-content *ngIf="isRateVisible">
            <p>How was your experience with our code?</p>
            <div class="flex-row">
              <div class="ratings-stars">
                <app-star-rating
                  (ratingSelected)="handleRatingSelected($event)"
                ></app-star-rating>
              </div>
            </div>
            <textarea
              class="rating-box"
              [(ngModel)]="reviewText"
              placeholder="Write your review"
            ></textarea>
            <button
              class="rate-btn"
              (click)="submitRating(postDetails?.tableRefGuid)"
            >
              Rate
            </button>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
  <div></div>
</div>
